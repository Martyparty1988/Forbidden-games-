<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zakázané Hry - Edice Zjevení</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* DŮLEŽITÉ: Tato hra obsahuje explicitní a potenciálně extrémní úkoly.
           Hrajte ji pouze s plným, nadšeným a neustálým souhlasem (enthusiastic consent) obou partnerů.
           Komunikace, důvěra a předem stanovená bezpečná slova (safewords) jsou absolutně klíčové.
           Respektujte své limity a limity svého partnera. Cílem je společné potěšení, ne nepohodlí. */

        @keyframes fadeInDrop {
            from { opacity: 0; transform: translateY(-30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 25px rgba(185, 28, 28, 0.4); filter: drop-shadow(0 0 5px rgba(220, 38, 38, 0.5)); }
            50% { box-shadow: 0 0 40px rgba(185, 28, 28, 0.7); filter: drop-shadow(0 0 15px rgba(220, 38, 38, 0.7)); }
        }
        
        @keyframes dice-roll {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: var(--final-transform); }
        }
        
        @keyframes symbol-appear {
            from { opacity: 0; transform: scale(0.5); filter: blur(10px); }
            to { opacity: 1; transform: scale(1); filter: blur(0); }
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: #0a0a0a;
            background-image: radial-gradient(circle at center, #222 0%, #0a0a0a 80%);
            color: #e5e7eb;
            overflow: hidden;
        }
        .title-font {
            font-family: 'Cinzel', serif;
            text-shadow: 0 0 10px rgba(220, 38, 38, 0.7);
        }
        .modal {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }
        .modal.active {
            opacity: 1;
            pointer-events: all;
        }
        .modal-content {
            background-color: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid #991b1b;
            animation: fadeInDrop 0.5s ease-out forwards;
        }
        .action-button {
            background: linear-gradient(145deg, #dc2626, #991b1b);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 15px rgba(153, 27, 27, 0.5);
            text-shadow: 0 1px 2px rgba(0,0,0,0.4);
            color: #fff;
        }
        .action-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(153, 27, 27, 0.7);
        }
        .action-button:disabled {
            background: #4b5563;
            color: #9ca3af;
            cursor: not-allowed;
            transform: translateY(0);
            box-shadow: none;
        }

        /* --- Kostky --- */
        .dice-container {
            display: flex;
            gap: 30px;
            perspective: 1000px;
            margin-bottom: 2.5rem;
        }
        .cube {
            width: 70px;
            height: 70px;
            position: relative;
            transform-style: preserve-3d;
        }
        .cube.rolling {
           animation: dice-roll 1.5s ease-out forwards;
        }
        .face {
            position: absolute;
            width: 70px;
            height: 70px;
            background: #1f2937;
            border: 2px solid #991b1b;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #fca5a5;
        }
        .front  { transform: rotateY(  0deg) translateZ(35px); }
        .back   { transform: rotateY(180deg) translateZ(35px); }
        .right  { transform: rotateY( 90deg) translateZ(35px); }
        .left   { transform: rotateY(-90deg) translateZ(35px); }
        .top    { transform: rotateX( 90deg) translateZ(35px); }
        .bottom { transform: rotateX(-90deg) translateZ(35px); }
        
        #task-icon-container {
            height: 80px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #task-icon-container svg {
            width: 60px;
            height: 60px;
            animation: symbol-appear 1s ease-out;
            filter: drop-shadow(0 0 8px rgba(255, 100, 100, 0.7));
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="gameScreen" class="w-full max-w-2xl mx-auto text-center">
        <h1 class="text-6xl md:text-7xl font-bold text-red-600 title-font mb-4">Zakázané Hry</h1>
        <p class="text-lg text-gray-300 mb-8">Hoď kostkami a odevzdej se osudu.</p>

        <div id="turn-indicator" class="mb-8 p-3 bg-black bg-opacity-40 rounded-lg text-xl font-semibold text-white transition-opacity duration-500">
            Na řadě je: <span id="currentPlayer" class="text-2xl font-bold text-red-400"></span>
        </div>

        <div class="dice-container flex justify-center">
            <div id="cube1" class="cube"><div class="face front">1</div><div class="face back">6</div><div class="face right">2</div><div class="face left">5</div><div class="face top">3</div><div class="face bottom">4</div></div>
            <div id="cube2" class="cube"><div class="face front">1</div><div class="face back">6</div><div class="face right">2</div><div class="face left">5</div><div class="face top">3</div><div class="face bottom">4</div></div>
        </div>

        <button id="rollButton" class="action-button font-bold py-4 px-12 text-2xl rounded-full">
            Hodit kostkami!
        </button>
    </div>

    <!-- Modal pro zobrazení úkolu -->
    <div id="taskModal" class="modal fixed inset-0 bg-black bg-opacity-85 flex items-center justify-center p-4 z-50">
        <div class="modal-content rounded-2xl p-8 text-center max-w-md w-full">
            <div id="task-icon-container"></div>
            <h2 id="taskCategory" class="text-3xl font-bold title-font text-red-500 mb-4"></h2>
            <p id="taskText" class="text-xl md:text-2xl text-gray-200 mb-8 min-h-[120px] leading-relaxed"></p>
            <button id="closeModalButton" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-full transition-colors">
                Rozkaz přijat
            </button>
        </div>
    </div>

    <script>
        const rollButton = document.getElementById('rollButton');
        const modal = document.getElementById('taskModal');
        const taskCategoryEl = document.getElementById('taskCategory');
        const taskTextEl = document.getElementById('taskText');
        const closeModalButton = document.getElementById('closeModalButton');
        const currentPlayerEl = document.getElementById('currentPlayer');
        const turnIndicator = document.getElementById('turn-indicator');
        const cube1 = document.getElementById('cube1');
        const cube2 = document.getElementById('cube2');
        const taskIconContainer = document.getElementById('task-icon-container');

        // Databáze úkolů a SVG ikon
        const tasks = {
            2: { category: 'Totální Zkáza', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-4.44l-3 3v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4M7.5 19l-3-3M15 2l5 5M9 12l6 6M15 12l-6 6"/></svg>`, tasks: ['Partner, který neházel, může zničit jeden orgasmus druhému. Přiveď ho na pokraj a těsně před vrcholem ho tvrdě zastav.', 'Hráč na tahu musí sloužit jako lidský popelník (symbolicky, např. pro drobky) nebo pisoár (pouze se souhlasem a přípravou).', 'Vítěz může poraženého dočasně "označit" svým jménem nebo symbolem pomocí fixy na tělo. Zůstane tam po zbytek noci.'] },
            3: { category: 'Psychologická Válka', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>`, tasks: ['Hráč na tahu se musí druhému zpovídat ze svých 3 nejzvrhlejších fantazií, zatímco druhý ho kritizuje a ponižuje.', 'Gaslighting. Hráč na tahu musí přesvědčit druhého o něčem, co není pravda (např. "vždycky jsi chtěl/a zkusit..."), a druhý musí hrát s ním.', 'Hráč na tahu zakáže druhému používat určité slovo (např. "já", "prosím"). Za každé porušení následuje trest (plácnutí, štípnutí).'] },
            4: { category: 'Smyslová Deprivace', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/><line x1="1" y1="1" x2="23" y2="23"/></svg>`, tasks: ['Kompletní senzorická deprivace. Zavázejte partnerovi oči, ucpěte mu uši, svažte ho a nechte ho 5 minut v tichu a nejistotě, než začnete s drážděním.', 'Hra na teplotu. Střídejte kapání horkého vosku (ze svíčky s nízkým bodem tání) a přejíždění kostkou ledu po stejných místech.', 'Znehybněte partnera a drážděte ho pouze dechem a šeptáním do ucha. Žádné dotyky rukama po dobu 5 minut.'] },
            5: { category: 'Bolest & Rozkoš', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 13l-4-4h8l-4 4z"/></svg>`, tasks: ['Impact play. Použijte postupně tři různé nástroje (ruka, pásek, vařečka). Po každém výprasku se musí partner zeptat: "Mohu dostat další, pane/paní?"', 'Použijte kolíčky na prádlo na bradavky, stydké pysky nebo šourek. Hráč na tahu je sundá, až když bude spokojen s reakcí druhého.', 'Hair pulling. Pevně držte partnera za vlasy během celého aktu orálního sexu nebo soulože.'] },
            6: { category: 'Zvířecí Pud', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.69 18.33a2.48 2.48 0 0 1-3.38 0 4.43 4.43 0 0 1-1.27-3.21v-3.21a2.48 2.48 0 0 1 4.93 0v3.21a4.43 4.43 0 0 1-1.28 3.21z"/><path d="M19.5 12.31a2.48 2.48 0 0 1-3.38 0 4.43 4.43 0 0 1-1.27-3.21v-3.21a2.48 2.48 0 0 1 4.93 0v3.21a4.43 4.43 0 0 1-1.28 3.21z"/><path d="M4.5 12.31a2.48 2.48 0 0 1 3.38 0 4.43 4.43 0 0 1 1.27 3.21v3.21a2.48 2.48 0 0 1-4.93 0v-3.21a4.43 4.43 0 0 1 1.28-3.21z"/></svg>`, tasks: ['Pet play. Partner se chová jako pes - leze po čtyřech, jí z misky na zemi, nechá se hladit a nosí "obojek" (šátek). Pán mu může dávat povely.', 'Breeding kink. Hrubý, rychlý sex s explicitní a špinavou mluvou o oplodnění a majetnictví.', 'Marking. Zanechte na partnerově krku nebo stehně viditelný cucflek jako značku vlastnictví.'] },
            7: { category: 'Absolutní Kontrola', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 16l-3-3 3-3"/><path d="M9 16l-3-3 3-3"/><path d="M2 13h11"/><path d="M12 21v-8"/><path d="M15 21l3-3 3 3"/><path d="M21 21l-3-3-3 3"/></svg>`, tasks: ['Vládce (hráč na tahu) může zkombinovat dva libovolné úkoly z celé hry a druhý je musí splnit.', 'Vládce nařídí druhému specifickou a nepohodlnou polohu, ve které musí zůstat po dobu 10 minut, zatímco vládce si s ním hraje.', 'Vládce si vybere specifický outfit (nebo jeho absenci) a druhý v něm musí zůstat po zbytek večera.'] },
            8: { category: 'Oddané Uctívání', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M12 13.17V22"/><path d="M9 17.5l-2.5 2.5"/><path d="M15 17.5l2.5 2.5"/><path d="M2 13.17L4.5 9.5 7 13.17"/><path d="M17 13.17l2.5-3.67L22 13.17"/></svg>`, tasks: ['Foot gag. Hráč na tahu si nechá uctívat chodidla a jako vrchol ponížení může druhému strčit prsty u nohou do úst.', 'Body worship. Druhý hráč musí jazykem uctívat celé tělo hráče na tahu, od nohou až po obličej, velmi pomalu a důkladně.', 'Hráč na tahu se vyměškal na toaletě a druhý mu musí bez použití rukou vytřít zadek jazykem. (Extrémní, vyžaduje maximální důvěru).'] },
            9: { category: 'Extrémní Scénáře', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 18a6 6 0 0 0-6-6 6 6 0 0 1 12 0 6 6 0 0 0-6 6z"/><path d="M12 12a6 6 0 0 0 6-6 6 6 0 0 1-12 0 6 6 0 0 0 6 6z"/></svg>`, tasks: ['Scénář: Výslech. Jeden je agent, druhý zajatec. Použijte slovní nátlak, lechtání nebo lehké plácání k získání "informací" (tajných fantazií).', 'Scénář: Lékařská prohlídka. Velmi detailní a invazivní "prohlídka" všech tělesných otvorů. (Lze použít hračky jako spekulum).', 'Scénář: Obětování kultu. Jeden je kněz/kněžka, druhý je oběť, která je svázána na "oltáři" (postel) a připravena pro rituál.'] },
            10: { category: 'Objektifikace', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`, tasks: ['Použijte partnera jako kus nábytku. Musí sloužit jako stolička na nohy nebo stolek po dobu 10 minut bez hnutí.', 'Bondage. Svažte partnera do co nejbezmocnější polohy a nechte ho tak, zatímco se díváte na film nebo si čtete. Ignorujte ho.', 'Použijte roubík (ball gag) a sledujte, jak partner slintá. Můžete ho za to chválit nebo ponižovat.'] },
            11: { category: 'Orgasmus v Poutech', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"/></svg>`, tasks: ['Forced Orgasm. Přikažte partnerovi, aby se udělal, přesně když vy chcete, ne když chce on. Můžete ho přerušovat a začínat znovu.', 'Chastity. Pokud máte klícku/pásek cudnosti, zamkněte partnera. Pokud ne, symbolicky mu zavažte genitálie stuhou. Klíč/stuha patří vám.', 'Veřejný orgasmus. Partner musí vyvrcholit na místě, kde by mohl být teoreticky slyšet (např. u otevřeného okna).'] },
            12: { category: 'Není Cesty Zpět', icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>`, tasks: ['24/7 kontrakt. Vítěz sepíše jednoduchou smlouvu, která z poraženého dělá jeho majetek na příštích 24 hodin. Musí být dodržena (v rámci předem domluvených limitů).', 'Zlatá sprcha. Vítěz se může na poraženého vymočit. (Pouze s explicitním souhlasem a přípravou).', 'Právo veta. Vítěz může po zbytek noci zrušit jedno bezpečné slovo poraženého (kromě hlavního "stop" slova). To znamená, že menší protesty budou ignorovány. (EXTRÉMNĚ RIZIKOVÉ!)'] }
        };

        let players = ['Vládce', 'Poddaný'];
        let currentPlayerIndex = 0;
        let isRolling = false;

        const initializeGame = () => {
            updateTurnIndicator();
        };

        const updateTurnIndicator = () => {
            turnIndicator.style.opacity = 0;
            setTimeout(() => {
                currentPlayerEl.textContent = players[currentPlayerIndex];
                turnIndicator.style.opacity = 1;
            }, 500);
        }

        const rollDice = () => {
            if (isRolling) return;
            isRolling = true;

            const outcomes = [
                { x: 360 * 3, y: 360 * 2 }, // 1
                { x: 360 * 3, y: 360 * 2 + 90 }, // 2
                { x: 360 * 3 - 90, y: 360 * 2 }, // 3
                { x: 360 * 3 + 90, y: 360 * 2 }, // 4
                { x: 360 * 3, y: 360 * 2 - 90 }, // 5
                { x: 360 * 3, y: 360 * 2 + 180 }  // 6
            ];

            const roll1 = Math.floor(Math.random() * 6) + 1;
            const roll2 = Math.floor(Math.random() * 6) + 1;

            const totalRoll = roll1 + roll2;

            const finalTransform1 = `rotateX(${outcomes[roll1 - 1].x}deg) rotateY(${outcomes[roll1 - 1].y}deg)`;
            const finalTransform2 = `rotateX(${outcomes[roll2 - 1].x}deg) rotateY(${outcomes[roll2 - 1].y}deg)`;

            cube1.style.setProperty('--final-transform', finalTransform1);
            cube2.style.setProperty('--final-transform', finalTransform2);

            cube1.classList.add('rolling');
            cube2.classList.add('rolling');

            setTimeout(() => {
                cube1.classList.remove('rolling');
                cube2.classList.remove('rolling');
                isRolling = false;
                showTask(totalRoll);
            }, 1500); // Animation duration
        };

        const showTask = (totalRoll) => {
            const taskData = tasks[totalRoll];
            if (taskData) {
                taskCategoryEl.textContent = taskData.category;
                taskTextEl.textContent = taskData.tasks[Math.floor(Math.random() * taskData.tasks.length)];
                taskIconContainer.innerHTML = taskData.icon;
                modal.classList.add('active');
            } else {
                taskCategoryEl.textContent = 'Nic se nestalo';
                taskTextEl.textContent = 'Hoďte si znovu.';
                taskIconContainer.innerHTML = '';
                modal.classList.add('active');
            }
        };

        const closeModal = () => {
            modal.classList.remove('active');
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            updateTurnIndicator();
        };

        rollButton.addEventListener('click', rollDice);
        closeModalButton.addEventListener('click', closeModal);

        initializeGame();

        // PWA Registrace Service Workeru
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('Service Worker registration failed: ', registrationError);
                    });
            });
        }

        // PWA Manifest Link
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = '/manifest.json';
        document.head.appendChild(link);

    </script>
</body>
</html>

